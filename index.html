<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Victoria Yin" />


<title>PM566 Final Project</title>

<script src="site_libs/header-attrs-2.15/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">PM566 Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="HW5.html">HW 5</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USCbiostats/PM566">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://uscbiostats.github.io/PM566/">PM566 Home</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">PM566 Final Project</h1>
<h4 class="author">Victoria Yin</h4>

</div>


<p>This is my PM566 Final Project website.</p>
<p><br></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Los Angeles County provides openly available data on all restaurant
and market inspections over the past 5 years. Facilities are subject to
inspection 1 to 3 times a year, and made public within 1 week of
inspection date. The frequency in which restaurants and food markets are
inspected depends on the public health risk associated with the food
products served or prepared and on the facility’s history of inspection
grades. Inspectors deduct points based on violations and health risks,
which is turned into a score out of 100. In addition, Los Angeles County
data from 2018 on population health is publicly available. Demographic
data, such as age and race distribution, socioeconomic data, such as
proportion receiving EBT and proportion employed, and health outcomes
data, such as proportion with asthma and rates of suicide, are provided
for 87 cities within Los Angeles County.</p>
<div id="objective" class="section level2">
<h2>Objective</h2>
<p>I am interested in exploring restaurant inspection ratings in LA
County. I have a few questions, with the main one being: Are restaurant
inspection ratings associated with community health status? Secondary
questions include: What are the “safest” and most “dangerous” cities in
LA County for eating restaurant food? What restaurant chain is the
“safest” to eat at? What restaurant chains should one proceed with
caution?</p>
</div>
</div>
<div id="methods" class="section level1">
<h1>Methods</h1>
<div id="reading-in-and-wrangling-the-data" class="section level2">
<h2>Reading in and wrangling the data</h2>
<p>I used 2 data sets which I merged together for this project. Both are
available at data.lacounty.gov to download as CSV (I have also uploaded
these datasets to my github repository). The first is a dataset of all
LA County restaurant inspections. I added LA County city health data to
see if there were any relationships between public health outcomes and
local restaurant hygiene. These datasets were merged by city name, and
no restaurant was missing its city in the first dataset. City names were
briefly inspected to ensure matching would be feasible. As Los Angeles
had many sub-cities for which there was health data, I only included the
“City of Los Angeles” data to represent the local public health for any
restaurant with city listed as Los Angeles. Only restaurants in cities
with health data were included in this analysis.</p>
</div>
<div id="data-exploration" class="section level2">
<h2>Data Exploration</h2>
<p>Data were explored utilizing R package ggplot2 to create a histogram
of scores. Implausibly low scores were deleted (score less than 50, of
which there was 1 value with score 3). Average scores within cities were
computed and compared. Restaurant chains were identified through
tokenizing words as bigrams, and looking to see most common chain
restaurants. The following set of 9 chains were selected: McDonald’s,
Jack in the Box, Starbucks, El Pollo Loco, Panda Express, Taco Bell, Del
Taco, In N Out, Panera Bread. Average chain inspection scores were
computed and compared. Measures of public health were selected:
proportion with depression, proportion with obesity, proportion with
diabetes.</p>
<p>To observe the relationship between restaurant rating and community
health status, only chain restaurants were analyzed (due to sample
size). Chain restaurant addresses were geocoded using tidygeocoder and
OpenStreetMaps in order to map latitudes and longitudes on the plots.
This method does not require an API key!</p>
<pre><code>## Source: local data table [475,719 x 102]
## Call:   `_DT4`[!`_DT5`, on = .(word)]
## 
##   FACILITY_CITY ACTIVI…¹ OWNER…² OWNER…³ FACIL…⁴ RECOR…⁵ PROGR…⁶ PROGR…⁷ PROGR…⁸
##   &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt;
## 1 ALHAMBRA      2021/10… OW0269… SKATE … FA0280… PR0235… SKATES… ACTIVE     1634
## 2 ALHAMBRA      2018/05… OW0031… SANCHE… FA0006… PR0037… BUN N … ACTIVE     1638
## 3 ALHAMBRA      2018/05… OW0031… SANCHE… FA0006… PR0037… BUN N … ACTIVE     1638
## 4 ALHAMBRA      2021/07… OW0033… STARBU… FA0048… PR0005… STARBU… ACTIVE     1633
## 5 ALHAMBRA      2021/07… OW0033… STARBU… FA0048… PR0005… STARBU… ACTIVE     1633
## 6 ALHAMBRA      2019/05… OW0185… SAN TU… FA0179… PR0173… RICK&#39;S… ACTIVE     1638
## # … with 475,713 more rows, 93 more variables: PE_DESCRIPTION &lt;chr&gt;,
## #   FACILITY_ADDRESS &lt;chr&gt;, FACILITY_STATE &lt;chr&gt;, FACILITY_ZIP &lt;int&gt;,
## #   SERVICE_CODE &lt;int&gt;, SERVICE_DESCRIPTION &lt;chr&gt;, SCORE &lt;int&gt;,
## #   SERIAL_NUMBER &lt;chr&gt;, EMPLOYEE_ID &lt;chr&gt;, ObjectId.x &lt;int&gt;, Pop_Tot &lt;int&gt;,
## #   Prop_18y &lt;dbl&gt;, Prop_64y &lt;dbl&gt;, Prop_65y_ &lt;dbl&gt;, Prop_Blk &lt;dbl&gt;,
## #   Prop_Lat &lt;dbl&gt;, Prop_Whi &lt;dbl&gt;, Prop_Asi &lt;dbl&gt;, Prop_Ami &lt;dbl&gt;,
## #   Prop_NHO &lt;dbl&gt;, Prop_FPL1 &lt;dbl&gt;, Prop_FPL2 &lt;dbl&gt;, Prop_forb &lt;dbl&gt;, …
## 
## # Use as.data.table()/as.data.frame()/as_tibble() to access results</code></pre>
<p>In total, there were 252773 inspections of 39423 restaurants in 66
cities within LA County.</p>
<p>Of the 252773 inspections included in the analysis, the average grade
was 93.9351117 with a standard deviation of 3.8669866. The highest score
was a perfect score, 100 whereas the lowest score was 54. Interestingly,
there appears to be a peak at 90, which corresponds to the lowest
possible score to achieve an A rating. This may hint at bias involved in
the inspection grading process.</p>
<pre class="r"><code>scorehisto</code></pre>
<p><img src="index_files/figure-html/histogram-1.png" width="700px" style="display: block; margin: auto;" /></p>
<pre class="r"><code>citysum %&gt;% arrange(desc(mean_score)) %&gt;% slice(1:5) %&gt;% knitr::kable(col.names = c(&quot;City&quot;, &quot;Average Score&quot;, &quot;Standard Deviation of Score&quot;, &quot;Number of Inspections in City&quot;, &quot;Proportion Diabetes&quot;, &quot;Proportion Obesity&quot;, &quot;Proportion Depression&quot;), caption = &quot;Top 5 Cities&quot;)</code></pre>
<table>
<caption>Top 5 Cities</caption>
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="18%" />
<col width="20%" />
<col width="13%" />
<col width="12%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">City</th>
<th align="right">Average Score</th>
<th align="right">Standard Deviation of Score</th>
<th align="right">Number of Inspections in City</th>
<th align="right">Proportion Diabetes</th>
<th align="right">Proportion Obesity</th>
<th align="right">Proportion Depression</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">LONG BEACH</td>
<td align="right">97.37500</td>
<td align="right">0.7440238</td>
<td align="right">2</td>
<td align="right">0.1167</td>
<td align="right">0.2422</td>
<td align="right">0.0884</td>
</tr>
<tr class="even">
<td align="left">CALABASAS</td>
<td align="right">96.03195</td>
<td align="right">2.9069571</td>
<td align="right">127</td>
<td align="right">NA</td>
<td align="right">0.1094</td>
<td align="right">0.1412</td>
</tr>
<tr class="odd">
<td align="left">SANTA CLARITA</td>
<td align="right">95.74072</td>
<td align="right">3.2719696</td>
<td align="right">402</td>
<td align="right">0.0880</td>
<td align="right">0.2528</td>
<td align="right">0.1126</td>
</tr>
<tr class="even">
<td align="left">MAYWOOD</td>
<td align="right">95.60426</td>
<td align="right">3.4357203</td>
<td align="right">156</td>
<td align="right">0.0929</td>
<td align="right">0.2925</td>
<td align="right">0.0720</td>
</tr>
<tr class="odd">
<td align="left">EAST LOS ANGELES</td>
<td align="right">95.49254</td>
<td align="right">3.4039778</td>
<td align="right">12</td>
<td align="right">0.0934</td>
<td align="right">0.2778</td>
<td align="right">0.0764</td>
</tr>
</tbody>
</table>
<pre class="r"><code>citysum %&gt;% arrange(mean_score) %&gt;% slice(1:5) %&gt;% knitr::kable(col.names = c(&quot;City&quot;, &quot;Average Score&quot;, &quot;Standard Deviation of Score&quot;, &quot;Number of Inspections in City&quot;, &quot;Proportion Diabetes&quot;, &quot;Proportion Obesity&quot;, &quot;Proportion Depression&quot;), caption = &quot;Bottom 5 Cities&quot;)</code></pre>
<table>
<caption>Bottom 5 Cities</caption>
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="18%" />
<col width="20%" />
<col width="13%" />
<col width="12%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">City</th>
<th align="right">Average Score</th>
<th align="right">Standard Deviation of Score</th>
<th align="right">Number of Inspections in City</th>
<th align="right">Proportion Diabetes</th>
<th align="right">Proportion Obesity</th>
<th align="right">Proportion Depression</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">MONTEREY PARK</td>
<td align="right">91.63380</td>
<td align="right">5.506981</td>
<td align="right">467</td>
<td align="right">0.1222</td>
<td align="right">0.1058</td>
<td align="right">0.0442</td>
</tr>
<tr class="even">
<td align="left">ROWLAND HEIGHTS</td>
<td align="right">91.68030</td>
<td align="right">4.965620</td>
<td align="right">429</td>
<td align="right">0.1049</td>
<td align="right">0.1848</td>
<td align="right">0.0422</td>
</tr>
<tr class="odd">
<td align="left">ALHAMBRA</td>
<td align="right">92.36034</td>
<td align="right">4.893888</td>
<td align="right">477</td>
<td align="right">0.1040</td>
<td align="right">0.1358</td>
<td align="right">0.0523</td>
</tr>
<tr class="even">
<td align="left">GARDENA</td>
<td align="right">92.36540</td>
<td align="right">4.176667</td>
<td align="right">685</td>
<td align="right">0.0991</td>
<td align="right">0.2770</td>
<td align="right">0.0584</td>
</tr>
<tr class="odd">
<td align="left">CERRITOS</td>
<td align="right">92.59487</td>
<td align="right">4.416418</td>
<td align="right">344</td>
<td align="right">0.0948</td>
<td align="right">0.2342</td>
<td align="right">0.0410</td>
</tr>
</tbody>
</table>
</div>
</div>

<p> Copyright &copy 2022. Victoria Yin. </p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
